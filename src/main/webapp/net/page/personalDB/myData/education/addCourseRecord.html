<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>数汇宝模板</title>
<!--[if lt IE 9]>
		<script src="js/html5shiv.min.js"></script>
		<![endif]-->

<link rel="stylesheet" href="../../../../css/common.css" />
<link rel="stylesheet" href="../../../../css/style.css" />
<link rel="stylesheet" href="../../../../../css/net/mycss.css" />
<link rel="stylesheet" type="text/css"href="../../../../../js/themes/default/easyui.css" />
<link rel="stylesheet" type="text/css" href="../../../../../js/themes/icon.css" />

    <script src="../../../../js/jquery-1.11.1.min.js"></script>
	<script src="../../../../../js/jquery.easyui.min.js"></script>
	<script src="../../../../../js/locale/easyui-lang-zh_CN.js"></script>
	<script src="../../../../js/calendar.js"></script>
	<script src="../../../../../js/myjs/net.js"></script>
	<script src="../../../../../js/myjs/picPreview.js"></script>

<style>
td div {
	padding: 2.2px 0;
}
#preview{overflow:hidden;}
#imghead {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image);}
</style>
</head>
<body>
	<div id="right_content">
		<div class="content_title">课程明细</div>

		<div class="clearfloat" style="height:10px;"></div>
		<div class="default_line"></div>
		<div class="clearfloat" style="height:24px;"></div>

		<form method="post" id="data"> 
			<table class="data_tab" cellpadding="0" cellspacing="0" border="0" width="100%">
				<tr>
					<td width="15%" class="fnt_333333_13" align="right"><span class="necessity">*</span>成员：</td>
					<td width="35%">
						<input class="easyui-combobox" id="member" name="member" data-options="
							url: '../../../../../rest/getType/3',
							valueField: 'type_ID',
							textField: 'typeName',
							editable: false,
							onLoadSuccess: function(data){
									for(i in data){
										if(data[i].typeName == '自己'){
											$('#member').combobox('select', data[i].type_ID);
										}
									}
								}
						">
						<span class="errorMsg" id="empMember">×必选</span>
					</td>
					<td width="15%" class="fnt_333333_13" align="right"><span class="necessity">*</span>年龄：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px" placeholder="长度不能超过3"
								id="age" name="age">
						</div>
						<span class="errorMsg" id="empAge">×必填</span>
						<span class="errorMsg" id="errAge">×格式错误</span>
					</td>
				</tr>

				<tr>
					<td width="15%" class="fnt_333333_13" align="right"><span class="necessity">*</span>课程名：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px"
								id="course" name="course" placeholder="长度不能超过30">
						</div>
						<span class="errorMsg" id="empCourse">×必填</span>
						<span class="errorMsg" id="errCourse">×格式错误</span>
					</td>
					<td width="15%" class="fnt_333333_13" align="right">课程编号：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px"
								id="courseNo" name="courseNo">
						</div>
						<span class="errorMsg" id="errCourseNo">×长度不能超过20</span>
					</td>
				</tr>

				<tr>
					<td width="15%" class="fnt_333333_13" align="right">教室：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px"
								id="place" name="place">
						</div>
						<span class="errorMsg" id="errPlace">×长度不能超过40</span>
					</td>
					<td width="15%" class="fnt_333333_13" align="right">教师：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px"
								id="teacher" name="teacher">
						</div>
						<span class="errorMsg" id="errTeacher">×长度不能超过20</span>
					</td>
				</tr>

				<tr>
					<td width="15%" class="fnt_333333_13" align="right"><span class="necessity">*</span>学习年度：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px"
								id="studyYear" name="studyYear" placeholder="长度不能超过20">
						</div>
						<span class="errorMsg" id="empStudyYear">×必填</span>
						<span class="errorMsg" id="errStudyYear">×格式错误</span>
					</td>
					<td width="15%" class="fnt_333333_13" align="right">上课时间：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px"
								id="studyTime" name="studyTime">
						</div>
						<span class="errorMsg" id="errStudyTime">×长度不能超过20</span>
					</td>
				</tr>

				<tr>
					<td width="15%" class="fnt_333333_13" align="right"><span class="necessity">*</span>考试成绩：</td>
					<td width="35%">
						<div style="float:left;width:180px;" class="default_box ">
							<input class="default_input" style="width:160px"
								id="finalGrade" name="finalGrade" placeholder="分值或1-3字中文评级">
						</div>
						<span class="errorMsg" id="empFinalGrade">×必填</span>
						<span class="errorMsg" id="errFinalGrade">×格式错误</span>
					</td>
				</tr>
				
				<tr>
					<td width="15%" class="fnt_333333_13" align="right">添加附件：</td>
					<td width="85%" colspan="5"><a href="javascript:void(0)"
						class="default_btn5 no-line" style="float:left;"
						onclick="upload()">浏览...</a> <!-- <input id="uploadFile" type="file"
						style="display:none"> --></td>
				</tr>
			</table>

			<div class="clearfloat" style="height:24px;"></div>
			<div class="default_line"></div>
			<div class="clearfloat" style="height:24px;"></div>
		</form>

		<form id="attachment" method="post" enctype="multipart/form-data">
			<table id="dg" class="easyui-datagrid" cellpadding="0"
				cellspacing="0"
				data-options="fitColumns: true, singleSelect:true">
				<thead>
					<tr class="tr1 fnt_333333_13">
						<th
							data-options="field:'order', align:'center', formatter: generateOrder"
							style="width:10%;">序号
						</th>
						<th data-options="field:'attachedFileName', align: 'center'"
							style="width:40%;">附件名
						</th>
						<th data-options="field:'uploadDate', align: 'center'"
							style="width:20%;">上传时间
						</th>
						<th data-options="field:'operate', align: 'center', formatter: operate"
							style="width:30%;">操作
						</th>
					</tr>
				</thead>
			</table>
			<input type="hidden" id="id" name="courseRecord_ID">
			<div id="file" style="display:none;"></div>
		</form>

		<div class="clearfloat" style="height:24px;"></div>
		<div class="default_line"></div>
		<div class="clearfloat" style="height:24px;"></div>

		<div>
			<!-- <a href="#" class="default_btn6 no-line"
				style="float:right;margin-left:10px;height:28px;line-height:32px;">确认保存</a>
			<a href="#" class="default_btn5 no-line"
				style="float:right;margin-left:10px;height:28px;line-height:32px;">取消</a> -->
			<input type=button class="default_btn6 btn_height" value="确认保存"
				onclick="add()"> <input type="button"
				class="default_btn5 btn_height" value="重置" onclick="reset()"> <input
				type="button" class="default_btn5 btn_height" value="返回"
				onclick="history.back(-1)">
		</div>
	</div>
	<div class="clearfloat" style="height:0px;"></div>
	<div id="win"></div>
	
<script>
function add(){
	var updUrl = '../../../../../rest/common/course/handle';
	var attUrl = '../../../../../rest/common/course/upload';
	submit(updUrl, attUrl, 'courseRecord_ID', null);
}
function validate() {
	var flag = true;
	
	var member = $('#member').combobox('getValue');
	if(member.length == 0){
		$('#empMember').css('display', 'inline');
		flag = false;
	}
	
	var age = $('#age').val();
	var ageFormat = /^[1-9]\d{0,1}$|^1\d{0,2}$/;
	if(age.trim().length == 0){
		$('#empAge').css('display','inline');
		flag = false;
	}else if(!ageFormat.test(age)){
		$('#errAge').css('display', 'inline');
		flag = false;
	}
	
	var courseNo = $('#courseNo').val();
	if(courseNo.length > 20){
		$('#errCourseNo').css('display', 'inline');
		flag = false;
	}
	
	var course = $('#course').val();
	if(course.trim().length == 0){
		$('#empCourse').css('display', 'inline');
		flag = false;
	}else if(course.length > 30){
		$('#errCourse').css('display', 'inline');
		flag = false;
	}
	
	var place = $('#place').val();
	if(place.length > 40){
		$('#errPlace').css('display', 'inline');
		flag = false;
	}
	
	var teacher = $('#teacher').val();
	if(teacher.length > 20){
		$('#errTeacher').css('display', 'inline');
		flag = false;
	}
	
	var studyYear = $('#studyYear').val();
	if(studyYear.trim().length == 0){
		$('#empStudyYear').css('display', 'inline');
		flag = false;
	}else if(studyYear.length > 20){
		$('#errStudyYear').css('display', 'inline');
		flag = false;
	}
	
	var studyTime = $('#studyTime ').val();
	if(studyTime.length > 20){
		$('#errStudyTime').css('display', 'inline');
		flag = false;
	}
	
	var finalGrade = $('#finalGrade').val().trim();
	var gradeFormat = /^[0-9]{1,3}(\.\d{1})?$|^[\u4e00-\u9fa5]{1,3}$/;
	if(finalGrade.length == 0){
		$('#empFinalGrade').css('display', 'inline');
		flag = false;
	}else if(!gradeFormat.test(finalGrade)){
		$('#errFinalGrade').css('display', 'inline');
		flag = false;
	}
	return flag;
}
</script>
</body>
</html>
